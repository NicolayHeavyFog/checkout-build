(function(){"use strict";var e={4326:function(e,t,s){var a=s(144),n=s(5075),r=s(1049),i=s(4886),o=s(6762),l=s(7203),c=s(3956),u=s(888),d=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("MainHeader",{attrs:{preloader:e.fetchStatus.loading,info:e.headerInfo},on:{"change-flight":function(t){return e.changeFlight()}}}),t("MainPage",{attrs:{preloader:e.fetchStatus.loading&&!e.toOpenListCards},on:{updateFlightInfo:e.updateFlightInfo}}),e.fetchStatus.loading||"OPENED"!==e.store.statusFlight?e._e():t("MainFooter"),t(n.Z,[t(o.Z,{attrs:{persistent:"","max-width":"809"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(r.Z,{staticClass:"suggestion"},[t(i.EB,[t("span",{staticClass:"text-h5"},[e._v("Выбор сегмента")])]),t("form",{attrs:{action:"#"}},[t(c.Z,{model:{value:e.radioGroup,callback:function(t){e.radioGroup=t},expression:"radioGroup"}},e._l(e.segments,(function(s,a){return t(l.Z,{key:a,staticClass:"suggestion__row",class:"OPENED"===s.status?"active":"",attrs:{color:"black",value:a,checked:e.radioGroup===a},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",{staticClass:"suggestion__row-left"},[t("div",{staticClass:"suggestion__header"},[t("h2",{staticClass:"suggestion__title"},[e._v(" "+e._s(s.departureCity)+" — "+e._s(s.arrivalCity)+" ")]),t("span",{staticClass:"suggestion__subtitle suggestion__subtitle--color-grey"},[e._v(e._s(s.departureAirport))]),t("span",{staticClass:"suggestion__subtitle"},[e._v(" "+e._s(e.convertTime(s.departureDateTime)))])]),t("span",{staticClass:"suggestion__text"},[e._v(" Веб-регистрация на рейс: "),t("span",{class:"OPENED"===s.status?"":"suggestion__text--color-red"},[e._v("  "+e._s("OPENED"===s.status?` открыта до ${e.convertTime(s.webCheckInClose,"dd MMMM yyyy, HH:MM")}`:"закрыта")+" ")]),e._v(" "+e._s())])]),t("div",{staticClass:"suggestion__row-right"},[t("span",{staticClass:"suggestion__subtitle suggestion__subtitle--mb-10"},[e._v("Рейс: "+e._s(s.flightCode))]),t("span",{staticClass:"suggestion__subtitle suggestion__subtitle--color-grey suggestion__subtitle--size-16"},[e._v(e._s(s.airline))])])]},proxy:!0}],null,!0)})})),1)],1),t("div",{staticClass:"suggestion__button-group"},[t("BaseButton",{staticClass:"button--mr-10",attrs:{text:"Перейти к веб-регистрации"},on:{click:function(t){return e.setTicket()}}}),t(u.Z)],1)],1)],1),t(n.Z,[t("div",{attrs:{id:"teleport-target"}})])],1),t("BaseNotification",{on:{reload:function(t){return e.fetch()}}})],1)},p=[],m=(s(7658),s(9876)),h=s(9669),f=s.n(h);const _=f().create({baseURL:"https://checkin24.ru",headers:{"Content-Type":"application/json"}});var g=_;const v=f().create({baseURL:"https://checkin24.ru",headers:{"Content-Type":"application/x-www-form-urlencoded"}});var b=v;function C(e){return{info(t){return e.get(`_api/checkouts/${t}/`)},airline(t){return e.get(`_api/airlines/${t}/`)},infoDetailed(t){return e.post("_seatmap_api/general/doByPassenger",t)}}}function k(e){return{register(t){return e.post("auto/checkout/",t)}}}var y={passenger:C(g),requestData:k(b)},P=s(8246);const S=(0,m.Q_)("users",{state:()=>({persons:[],airline:null,segments:null,segmentsResult:null,basePerson:null,basePersonEmail:null,basePersonIsDefined:null,statusFlight:null,flightKey:null,fetchStatus:{success:!0,loading:!0},dialog:!1,notification:{type:null,availableReload:null,textMessage:null},webCheckInOpen:null,gtm:(0,P.dx)()}),getters:{checkSeats(){let e=!0;return this.persons.forEach((t=>{t?.normalSeat||(e=!1)})),e},registerIsStarted(){return this?.webCheckInOpen?x(this.webCheckInOpen):null},totalForms(){return this.persons.reduce(((e,t)=>"NOT_CHECKED"===t.checked&&t?.normalSeat?e+1:e+0),0)},totalPrice(){return this.persons.reduce(((e,t)=>"NOT_CHECKED"===t.checked&&t.seatRate?e+t.seatRate:e+0),0)||0},listTickets(){return this.persons.map((e=>e.ticketNumber))},activePerson(){return this.persons.find((e=>e.active))},findPersonByTicket(){return e=>this.persons.find((t=>t.ticketNumber===e))},findIndexPersonByTicket(){return e=>this.persons.findIndex((t=>t.ticketNumber===e))},parseSegments(){return e=>{this.segments=e.selectSegmentsGroupCase.segmentGroups.map((e=>{const t=e[0];return{webCheckInOpen:t.stages.webCheckInOpen,webCheckInClose:t.stages.webCheckInClose,departureCity:t.departureCity,arrivalCity:t.arrivalCity,departureAirport:t.departureAirport,airline:t.airline,flightCode:t.airlineCode+"-"+t.flightNumber,arrivalDateTime:t.arrivalDateTime,departureDateTime:t.departureDateTime,status:t.status}}))}}},actions:{findRateBySeat(e,t){let s=null;const a=e.rows.findIndex((e=>Number(e.row_number)===parseInt(t)));return s=e.rows[a].seats.find((e=>String(e.seatNumber)===String(t))),s.rate},setNotification(e,t,s){this.notification={type:e,availableReload:t,textMessage:s}},deletePerson(e){if(!e)return;const t=[...this.persons],s=t.findIndex((t=>t.ticketNumber===e));t.splice(s,1),this.$patch({persons:t})},updatePerson(e,t){const s=[...this.persons];s[e]={...s[e],...t},this.$patch({persons:s})},async checkAvailableSeat(e,t){const s=this.findPersonByTicket(e),a={airline:this.airline.iata_code,passenger:{seatNumber:t,lastName:s.lastName,ticketNumber:s.ticketNumber,segmentsGroupIndex:s.segmentsGroupIndex||0,segmentIndex:0}};try{return(await y.passenger.infoDetailed({type:"getSeat",...a})).data[0]}catch({response:n}){return this.setNotification("error",!1,n.data.error),n}},async register(e){return await y.requestData.register(e)},parseResponse(e,t=null){const s={};if(this.flightKey){const t=D(e.segments[0]);if(t!==this.flightKey)return{compatibility:!1}}else this.flightKey=D(e.segments[0]);return this.webCheckInOpen=e.segments[0].stages.webCheckInOpen,this.statusFlight=e.segments[0].status,this.basePerson.departure_date||(this.basePerson.departure_date=e.segments[0].departureDate),this.basePerson.flight_number||(this.basePerson.flight_number=e.segments[0].flightNumber),s.possibleActions=I(e),s.checked=e.passengersType,s.fullName=e.passengers[0].name,s.status=e.segments[0].status,"CHECKED"===s.checked?s.normalSeat=e.passengers[0].segments[0].chosenSeatThroughGui.number:"NOT_CHECKED"===s.checked&&!1===e.passengers[0].segments[0].chosenSeatThroughGui?.autoAssigned&&(s.normalSeat=e.passengers[0].segments[0].chosenSeatThroughGui.number,t&&(s.seatRate=this.findRateBySeat(t,s.normalSeat))),s},updateUsers(e){const t=[...this.persons],s=this.persons.findIndex((t=>t?.ticketNumber===e.ticketNumber));-1!==s?t[s]=e:t.push(e),this.persons=t},async getPerson(e){try{return this.basePerson=(await y.passenger.info(e)).data,this.basePersonEmail=this.basePerson.email,!0}catch({response:t}){return this.setNotification("error",!1,t.data.detail),this.fetchStatus.success=!1,!1}},async getAirline(){try{return this.airline=(await y.passenger.airline(this.basePerson.airline)).data,!0}catch({response:e}){return this.setNotification("error",!1,e.data.detail),this.fetchStatus.success=!1,!1}},async getInfoFlight({lastName:e,ticketNumber:t},s=0){this.setNotification(null,null,null);let a={lastName:e,ticketNumber:t,segmentIndex:String(0),segmentsGroupIndex:String(s)};const n={airline:this.airline.iata_code,passenger:{...a}},[r,i]=await Promise.allSettled([y.passenger.infoDetailed({type:"ticketInfo",...n}),y.passenger.infoDetailed({type:"mapInfo",...n})]).catch((({response:e})=>(this.setNotification("error",!0,e.data?.detail||"Ошибка получения билета"),this.fetchStatus.success=!1,this.gtm.trackEvent({event:"ticket_api_error",category:"category",action:"click",label:"My custom component trigger",value:5e3,noninteraction:!1}),e.data)));return"fulfilled"===r.status&&"rejected"===i.status?(a={...a,...this.parseResponse(r.value.data)},this.updateUsers(a),{flightInfo:r.value.data.segments[0],instancePerson:a}):"fulfilled"===r.status&&"fulfilled"===i.status?(a={...a,...this.parseResponse(r.value.data,i.value.data)},a.mapSeats=i.value.data,this.updateUsers(a),{flightInfo:r.value.data.segments[0],checked:r.value.data.passengersType,mapSeats:i.value.data,instancePerson:a}):{flightInfo:r.value.data.segments[0]}},async checkValidPassenger({lastName:e,ticketNumber:t},s=0){const a={lastName:e,ticketNumber:t,segmentIndex:String(s),segmentsGroupIndex:String(s)},n={airline:this.airline.iata_code,passenger:{...a}};return await y.passenger.infoDetailed({type:"ticketsInfo",...n}).then((({data:e})=>e)).catch((({response:e})=>e?{code:e.status,data:e.data}:null))}}});function N(e){const t=e.split(" ");return t.join(" в ")}function x(e){if(!e)return null;const t=e.split(" "),s=t[0].split(".").reverse().join("/")+" "+t[1];return+new Date>+new Date(s)}function I(e){return e.passengers[0].segments[0].possibleActions}function E(e){return(new Intl.NumberFormat).format(e)}function w(){const e=S(),t=String(e.basePerson.flight_number);function s(e,t){return`&passenger-${t}-last_name=${e.lastName}&passenger-${t}-ticket_number=${e.ticketNumber}&passenger-${t}-seat=${e.normalSeat}&passenger-${t}-salon=any&passenger-${t}-revenue=${e.seatRate}`}let a="",n=0;return a+=`csrfmiddlewaretoken=${document.cookie.match(/csrftoken=(.+?)(;|$)/)[1]}&flight_number=${t.match(/\s/)?t.replace(/\s/,"%20"):t}&departure_date=${e.basePerson.departure_date}&email=${e.basePerson.email}&tariff=oneway&airline=${e.basePerson.airline}&checkoutId=${e.basePerson.checkoutId}&passenger-TOTAL_FORMS=${e.totalForms}&passenger-INITIAL_FORMS=1&passenger-MIN_NUM_FORMS=1&passenger-MAX_NUM_FORMS=12&type=auto`,e.persons.forEach((e=>{e?.seatRate&&(a+=s(e,n),n++)})),a}function T(e){window.scroll({left:0,top:e.offsetTop-300,behavior:"smooth"})}function D(e){return e.departureDateTime+" "+e.arrivalDateTime+" "+e.flightNumber}var B=s(3149),M=s(4607),O=function(){var e=this,t=e._self._c;return t("header",{staticClass:"header",class:e.storeUsers.registerIsStarted?"OPENED"===e.info.status?"registration-open":"":"registration-open"},[e.preloader?t("div",{staticClass:"container header__sceleton"},[t(M.Z,{attrs:{loading:!0,type:"heading, paragraph@2, chip"}})],1):t("div",{staticClass:"container"},[t("h1",{staticClass:"header__title"},[e._v(" Онлайн-регистрация на рейс № "+e._s(e.info.flightCode)+" ")]),t("div",{staticClass:"header-places"},[t("div",{staticClass:"header-places__departure"},[t("div",{staticClass:"header-places__header"},[t("h2",{staticClass:"header-places__city"},[e._v(e._s(e.info.departureCity))]),t("span",{staticClass:"header-places__ICAO"},[e._v(e._s(e.info.departureCityCode))])]),t("span",{staticClass:"header-places__time"},[e._v(" "+e._s(e.convertTime(e.info.departureDateTime))+" ")])]),t("svg",{staticClass:"header-places__icon"},[t("use",{attrs:{"xlink:href":"#airplane"}})]),t("div",{staticClass:"header-places__destination"},[t("div",{staticClass:"header-places__header"},[t("h2",{staticClass:"header-places__city"},[e._v(e._s(e.info.arrivalCity))]),t("span",{staticClass:"header-places__ICAO"},[e._v(e._s(e.info.arrivalCityCode))])]),t("span",{staticClass:"header-places__time"},[e._v(" "+e._s(e.convertTime(e.info.arrivalDateTime))+" ")])])]),t("span",{staticClass:"header__submessage"},[t("svg",{staticClass:"header__submessage-icon"},[t("use",{attrs:{"xlink:href":"#timeIcon"}})]),t("span",{staticClass:"header__submessage-notification"},[e._v(e._s(e.flightStatus))])]),e.storeUsers.segments?t(B.Z,{staticClass:"button button__secondary header__button",attrs:{absolute:"","x-large":""},on:{click:function(t){return e.changeFlight()}}},[e._v(" Изменить данные рейса ")]):e._e()],1)])},F=[],A={name:"MainHeader",props:{preloader:{type:Boolean,required:!0},info:{type:Object}},setup(e,{emit:t}){const s=S();function n(){t("change-flight")}const r=(0,a.Fl)((()=>(console.log(s.persons.length),s.persons.length?(console.log(s.registerIsStarted),s.registerIsStarted?"OPENED"===e.info.status?`Регистрация завершится ${N(e.info.webCheckInClose)}`:"Регистрация завершена":`Регистрация начнётся ${N(e.info.webCheckInOpen)}`):"")));return{storeUsers:s,flightStatus:r,convertTime:N,changeFlight:n}}},H=A,$=s(1001),Z=(0,$.Z)(H,O,F,!1,null,null,null),L=Z.exports,R=function(){var e=this;e._self._c;return e._m(0)},U=[function(){var e=this,t=e._self._c;return t("footer",{staticClass:"footer"},[t("div",{staticClass:"container"},[t("p",{staticClass:"footer__text"},[e._v(" Нажимая на кнопку «Зарегистрироваться», вы соглашаетесь с тем, что прочитали и принимаете "),t("a",{staticClass:"footer__link footer__link--underline footer__link--grey",attrs:{href:"https://checkin24.ru/terms-of-use/?from=checkout",target:"_blank"}},[e._v("соглашение")]),e._v(" с Checkin24. ")]),t("p",{staticClass:"footer__text footer__text--color-black"},[e._v(" Ответы на самые волнующие вопросы "),t("a",{staticClass:"footer__link",attrs:{href:"https://checkin24.ru/faq/?from=checkout",target:"_blank"}},[e._v("здесь")]),e._v(". ")]),t("p",{staticClass:"footer__text footer__text--color-black"},[e._v(" У вас есть вопросы или предпочтения, то можете связаться с нами по эл. почте: "),t("a",{staticClass:"footer__link",attrs:{href:"mailto:support@checkin24.ru"}},[e._v("support@checkin24.ru")]),e._v(" или онлайн-чату, который доступен справа внизу экрана. ")])])])}],q={name:"MainFooter"},G=q,j=(0,$.Z)(G,R,U,!1,null,null,null),K=j.exports,V=function(){var e=this,t=e._self._c;return t("main",{staticClass:"main"},[e.preloader?t("div",{staticClass:"main__loaders"},[t("div",{staticClass:"container main__sceleton"},[t(M.Z,{attrs:{type:"heading"}})],1),t("div",{staticClass:"container main__sceleton"},[t(M.Z,{staticClass:"main__sceleton-card",attrs:{type:"heading, chip, heading, chip, button"}})],1)]):t("PassengerList",{on:{updateFlightInfo:e.updateFlightInfo}})],1)},Y=[],W=s(5337),Q=s(8649),z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("section",{staticClass:"cards"},[t("h2",{staticClass:"cards__title"},[e._v("Пассажиры")]),t("div",{staticClass:"cards__container"},[e._l(e.storeCards.cards,(function(s,a){return t("CardPassenger",{key:a,attrs:{card:e.storeCards.cards[a],undeletable:0===a},on:{openCardMap:function(t){e.sheet=!e.sheet},updateFlightInfo:e.updateFlightInfo}})})),e.storeUsers.basePersonIsDefined&&"OPENED"===e.statusFlight?t("button",{staticClass:"card-suggestion",on:{click:function(t){return e.storeCards.createCard({},{status:"OPENED",personIdDefined:!0})}}},[t("svg",{staticClass:"card-suggestion__icon"},[t("use",{attrs:{"xlink:href":"#userIcon"}})]),t("span",{staticClass:"card-suggestion__message"},[e._v("+ Добавить пассажира")])]):e._e(),t(W.Z,{attrs:{inset:"","max-width":"960"},model:{value:e.sheet,callback:function(t){e.sheet=t},expression:"sheet"}},[t("CardMap",{attrs:{open:e.sheet},on:{close:function(t){e.sheet=!1}}})],1)],2)]),e.storeUsers.basePersonIsDefined&&"OPENED"===e.statusFlight?t("section",{staticClass:"mailer"},[t("div",{staticClass:"mailer__win",attrs:{id:"mail"}},[t("label",[t("span",{staticClass:"mailer__label"},[e._v("Эл. почта для получения посадочных талонов")]),t(n.Z,[t(Q.Z,{staticStyle:{"border-radius":"50px"},attrs:{placeholder:"email@mail.ru",outlined:"",color:"#07237E","background-color":"white",rules:[()=>!!e.storeUsers.basePersonEmail||"Это поле обязательно"]},model:{value:e.storeUsers.basePersonEmail,callback:function(t){e.$set(e.storeUsers,"basePersonEmail",t)},expression:"storeUsers.basePersonEmail"}})],1)],1)])]):e._e(),e.storeUsers.basePersonIsDefined&&"OPENED"===e.statusFlight?t("section",{staticClass:"output"},[t("span",{staticClass:"output__message"},[e._v(" Количество пассажиров: "+e._s(e.storeUsers.totalForms))]),t("span",{staticClass:"output__message"},[e._v("К оплате: "+e._s(e.storeUsers.totalPrice)+" ₽")])]):e._e(),e.storeUsers.basePersonIsDefined&&"OPENED"===e.statusFlight?t(n.Z,[t("BaseButton",{staticClass:"main__button",attrs:{text:"Зарегистрироваться",status:"primary",disabled:e.disabledButton},on:{click:e.doRegister}})],1):e._e()],1)},X=[],J=s(9507),ee=function(){var e=this,t=e._self._c;return t("article",{staticClass:"card"},[e.undeletable?e._e():t("button",{staticClass:"card__cancel",on:{click:function(t){return e.removeCard()}}}),t(n.Z,[t("label",[t("span",{staticClass:"card__label"},[e._v("Фамилия, как указана в билете")]),t(Q.Z,{staticStyle:{"border-radius":"50px"},attrs:{placeholder:"IVANOV",required:"",outlined:"",color:"#07237E",error:e.showMessageLastName,"error-messages":e.textMessageLastName,disabled:e.isConfirmed||"OPENED"!==e.statusFlight,rules:[()=>!!e.lastName||"Это поле обязательно",e=>e&&e.length>=3||"Имя минимум 3 символа"]},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}})],1),t("label",{staticClass:"card__container-ticket"},[t("span",{staticClass:"card__label"},[e._v(" Номер билета ")]),t(Q.Z,{staticStyle:{"border-radius":"50px"},attrs:{placeholder:"1234567891234",required:"",outlined:"",error:e.showMessageTicketNumber,"error-messages":e.textMessageTicketNumber,disabled:e.isConfirmed||"OPENED"!==e.statusFlight,"persistent-hint":e.$vuetify.breakpoint.width<=450,color:"#07237E",hint:'<div class="card__notification">\n      <span class="card__notification-message"\n        >Номер билета из 13 цифр. Пример: 5550123456789</span\n      ><br /><span class="card__notification-message"\n        >Номер брони из 6 символов. Пример: XZKLDR</span\n      >\n    </div> ',rules:[()=>!!e.ticketNumber||"Это поле обязательно"]},scopedSlots:e._u([{key:"message",fn:function({message:s}){return[t("span",{domProps:{innerHTML:e._s(s)}})]}}]),model:{value:e.ticketNumber,callback:function(t){e.ticketNumber=t},expression:"ticketNumber"}})],1),t("div",{staticClass:"card__place"},[e.chosenSeat&&"OPENED"===e.statusFlight?t(Q.Z,{staticClass:"card__place-input",staticStyle:{"border-radius":"50px","margin-right":"15px"},attrs:{placeholder:"Место",value:e.chosenSeat,required:"",outlined:"",disabled:"","hide-details":""}}):e._e(),"OPENED"!==e.statusFlight||e.showErrorNoConfirmed?e._e():t("BaseButton",{class:"card__button",attrs:{text:e.textButton,disabled:!e.lastName||!e.ticketNumber||!e.canChangeSeat,status:"primary",loading:e.loadingBtn},on:{click:e.addPersonOrChoseSeat}})],1),t("div",{staticClass:"card__warning"},[e.showErrorNoConfirmed&&!e.personChangedInputs?t(J.Z,{attrs:{text:"",type:"error"}},[e._v(" "+e._s(e.textErrorNoConfirmed)+" ")]):e._e(),"OPENED"!==e.statusFlight?t(J.Z,{attrs:{text:"",type:"warning"}},[e._v(" "+e._s(e.textWarning)+" ")]):e._e()],1)])],1)},te=[],se=function(){var e=this,t=e._self._c;return t(B.Z,{class:e.classes,attrs:{"x-large":"",elevation:"0",rounded:"",color:e.color,loading:e.loading,disabled:e.disabled},on:{click:function(t){return e.click()}}},[e._v(e._s(e.text))])},ae=[];const ne="#A7C42A",re="#07237E",ie=["#E2A2ED","#FFCD82","#FFAF82","#FF8282","#7fb5b5","#9d9101","#382c1e","#1e2460"];var oe={name:"BaseButton",props:{globalState:{type:String,default:"green"},text:{type:String},disabled:{type:Boolean,default:!1},status:{type:String,default:"primary"},loading:{type:Boolean,default:!1}},data(){return{}},computed:{color(){return"green"===this.globalState?ne:re},classes(){return"primary"===this.status?"button button__primary":"button button__secondary"}},methods:{click(){this.$emit("click")}}},le=oe,ce=(0,$.Z)(le,se,ae,!1,null,"7a2a1804",null),ue=ce.exports,de=s(3416);const pe=(0,m.Q_)("cards",{state:()=>({cards:[]}),getters:{getCardIndexById(){return e=>this.cards.findIndex((t=>t.id===e))},getCardByTicketNumber(){return e=>this.cards.find((t=>t.ticketNumber===e))},getCardIdByIndexPerson(){const e=S();return function(t){const s=e.persons[t];return this.getCardByTicketNumber(s.ticketNumber).id}}},actions:{patchCard(e,t){const s=[...this.cards],a=this.getCardIndexById(e);s[a]={...s[a],...t},this.cards=s},validateCard(e){const t=this.getCardIndexById(e),s=this.getCardByTicketNumber(this.cards[t].ticketNumber);let a={};return s&&s.id!==e?(a={message:"Пассажир с таким номером билета уже заполнен",type:"ticketNumber"},this.cards[t].isValidTicketNumber=!1,a):13!==this.cards[t].ticketNumber.length?(a={message:"Некорректный номер билета",type:"ticketNumber"},this.cards[t].isValidTicketNumber=!1,a):(this.cards[t].lastName.match(/^\d+$/)?a={message:"Имя введено не корректно",type:"lastName"}:(this.cards[t].isValidTicketNumber=!0,this.cards[t].isValidLastName=!0),a)},createCard({lastName:e,ticketNumber:t,mapSeats:s},a){const n=()=>{const e=(0,de.x0)(5);if(-1===this.getCardIndexById(e))return e;n()},r={...a};r.id=n(),r.lastName=e||"",r.ticketNumber=t||"",r.mapSeats=s||null,this.cards.push(r)},deleteCard({id:e,ticketNumber:t},s){const a=S();s&&a.deletePerson(t),this.cards.splice(this.getCardIndexById(e),1)}}});function me(){const e=S(),t=pe(),s=(0,a.iH)(""),n=(0,a.iH)(""),r=(0,a.iH)("Добавить"),i=(0,a.iH)(null),o=(0,a.iH)(null),l=(0,a.iH)(null),c=(0,a.iH)(!1),u=(0,a.iH)(!1);function d(){t.deleteCard({id:l.value,ticketNumber:n.value},u.value)}return{lastName:s,ticketNumber:n,mapSeats:i,chosenSeat:o,loadingBtn:c,id:l,storeUsers:e,removeCard:d,textButton:r,isConfirmed:u}}var he={name:"CardPassenger",components:{BaseButton:ue},props:{undeletable:{type:Boolean,default:!1},card:{type:Object,required:!0}},emit:["openCardMap"],setup(e,{emit:t}){const s=(0,P.dx)(),n=pe(),r=(0,a.iH)(!1),i=(0,a.qj)({message:null,type:null}),o=(0,a.iH)(!1),l=(0,a.iH)(""),c=(0,a.iH)(!1),u=(0,a.iH)(null),d=(0,a.iH)(!1),p=(0,a.iH)(null),m=(0,a.iH)(null),h=(0,a.iH)(""),f=(0,a.iH)(null),_=(0,a.iH)(null),{lastName:g,ticketNumber:v,mapSeats:b,chosenSeat:C,loadingBtn:k,id:y,storeUsers:S,removeCard:N,textButton:x,isConfirmed:I}=me();async function E(){I.value?(S.updatePerson(S.findIndexPersonByTicket(v.value),{active:!0}),s.trackEvent({event:"choose_seat",category:"category",action:"click",label:"My custom component trigger",value:5e3,noninteraction:!1}),t("openCardMap")):(w(n.validateCard(y.value)),await B(y.value),r.value=!1)}function w(e){0!==Object.getOwnPropertyNames(e).length&&("ticketNumber"===e.type?(d.value=!0,p.value=e.message):"lastName"===e.type&&(c.value=!0,u.value=e.message))}async function T({lastName:e,ticketNumber:s,index:a=0}){const r=await S.getInfoFlight({lastName:e,ticketNumber:s},a);if(!1===r?.compatibility)return o.value=!0,l.value="Этот пользователь не летит с вами в одном самолете",void(k.value=!1);r.instancePerson.normalSeat&&(C.value=r.instancePerson.normalSeat),r.instancePerson?.possibleActions?.length?f.value=r.instancePerson.possibleActions.includes("CHANGE_SEAT"):f.value=!1,m.value=r.checked,S.basePersonIsDefined||(t("updateFlightInfo",r.flightInfo),S.basePersonIsDefined=!0),I.value=!0,n.patchCard(y.value,{isConfirmed:I.value,mapSeats:r.mapSeats,normalSeat:r.instancePerson.normalSeat,possibleActions:r.instancePerson.possibleActions})}async function B(){const e=n.getCardIndexById(y.value),t=n.cards[e];if(t.isValidTicketNumber&&t.isValidLastName){k.value=!0;const e=await S.checkValidPassenger({lastName:g.value,ticketNumber:v.value});if(String(e?.code).startsWith("4"))o.value=!0,I.value=!1;else if("SELECT_SEGMENTS_GROUP"===e.result)if(S.basePersonIsDefined){const t=e.selectSegmentsGroupCase.segmentGroups.map((e=>D(e[0])));t.includes(S.flightKey)?await T({lastName:g.value,ticketNumber:v.value,index:t.findIndex((e=>e===S.flightKey))}):(o.value=!0,l.value="Этот пользователь не летит с вами в одном самолете")}else S.parseSegments(e),S.dialog=!0,S.basePerson.ticket_number=v.value,S.basePerson.last_name=g.value;else"CAPTCHA_REQUIRED"===e.result?(o.value=!0,r.value=!1,l.value="Исчерпан лимит запросов"):"OK"===e.result&&await T({lastName:g.value,ticketNumber:v.value});k.value=!1}}return(0,a.YP)([g,v],(()=>{o.value=!1,r.value=!0,d.value=!1,p.value=null,c.value=!1,u.value=null,y.value&&n.patchCard(y.value,{lastName:g.value,ticketNumber:v.value})})),(0,a.YP)((()=>n.cards),(()=>{const e=n.getCardIndexById(y.value),t=n.cards[e];C.value=t.normalSeat,x.value=C.value?"Изменить":"Выбрать место",t.isConfirmed||(x.value="Добавить"),t?.notification&&(i.message=t.notification.message,i.type=t.notification.type)}),{deep:!0}),(0,a.YP)((()=>S.statusFlight),(e=>{h.value="Регистрация завершена",_.value=e||"OPENED"}),{immediate:!0}),(0,a.bv)((async()=>{I.value=e.card.isConfirmed,x.value=e.card.isConfirmed?"Выбрать место":"Добавить",g.value=e.card.lastName,v.value=e.card.ticketNumber,b.value=e.card.mapSeats,m.value=e.card.checked,h.value=S.registerIsStarted?"OPENED"!==S.statusFlight?"Регистрация завершена":null:"Регистрация еще не началась",f.value=!0,e.card.possibleActions&&(f.value=e.card.possibleActions.includes("CHANGE_SEAT")),e.card.checked&&(C.value=e.card.seat),y.value=e.card.id,e.card.personIsDefined||(await(0,a.Y3)(),o.value=!e.card.personIdDefined,r.value=!1,l.value="По заданным параметрам пассажир не найден")})),{addPersonOrChoseSeat:E,personChangedInputs:r,errorLog:i,showErrorNoConfirmed:o,lastName:g,ticketNumber:v,mapSeats:b,chosenSeat:C,loadingBtn:k,removeCard:N,textButton:x,isConfirmed:I,storeUsers:S,showMessageLastName:c,textMessageLastName:u,showMessageTicketNumber:d,textMessageTicketNumber:p,textErrorNoConfirmed:l,textWarning:h,checked:m,statusFlight:_,canChangeSeat:f}}},fe=he,_e=(0,$.Z)(fe,ee,te,!1,null,"27dbb52f",null),ge=_e.exports,ve=s(7605),be=s(707),Ce=s(4694),ke=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card-map"},[t("div",{staticClass:"card-map__left-side"},[e.loadingLi.status?t("div",{staticClass:"card-map__overlay"}):e._e(),t("span",{staticClass:"card-map__description"},[e._v("Выберите место для пассажиров:")]),e.$vuetify.breakpoint.width>900?t("ul",{staticClass:"card-map__list"},e._l(e.store.persons,(function(s,a){return t("li",{key:a,ref:"items",refInFor:!0,staticClass:"card-map__item",class:e.setClass(s),attrs:{"data-index":a}},[e.loadingLi.indexPerson===a&&e.loadingLi.status?t("div",{staticClass:"card-map__item-button"},[t(ve.Z,{attrs:{indeterminate:"",size:"40",color:e.BLUE}})],1):t("button",{staticClass:"card-map__item-button",on:{click:function(t){return e.setPerson(a)}}},[t("strong",{staticClass:"card-map__item-name"},[e._v(e._s(s.fullName+" "+s.lastName))]),t("span",{staticClass:"card-map__item-status"},[e._v(e._s(e.doPersonStatus(s)))])])])})),0):e._e(),e.$vuetify.breakpoint.width<=900?t(be.Z,{staticStyle:{"border-radius":"8px"},attrs:{items:e.store.persons,"item-disabled":e=>!e.possibleActions.includes("CHANGE_SEAT"),"background-color":"white","hide-details":"","return-object":"","single-line":"",disabled:e.loadingSelect,loading:e.loadingSelect,label:"select"},scopedSlots:e._u([{key:"selection",fn:function(s){return[t("div",{staticClass:"card-map__item-button",class:e.setClass(s.item)},[t("strong",{staticClass:"card-map__item-name"},[e._v(e._s(s.item.fullName+" "+s.item.lastName))]),t("span",{staticClass:"card-map__item-status"},[e._v(e._s(s.item?.normalSeat?`Место ${s.item.normalSeat} за ${e.numberFormat(s.item.seatRate)} ₽`:"Место не выбрано"))])])]}},{key:"item",fn:function(s){return[t("div",{staticClass:"card-map__item-button",class:e.setClass(s.item)},[t("strong",{staticClass:"card-map__item-name"},[e._v(e._s(s.item.fullName+" "+s.item.lastName))]),t("span",{staticClass:"card-map__item-status"},[e._v(e._s(s.item?.normalSeat?`Место ${s.item.normalSeat} за ${e.numberFormat(s.item.seatRate)} ₽`:"Место не выбрано"))])])]}}],null,!1,3413520732),model:{value:e.currentPerson,callback:function(t){e.currentPerson=t},expression:"currentPerson"}}):e._e(),t("div",{staticClass:"card-map__group-button"},[e.store.checkSeats?t("BaseButton",{staticClass:"button button__primary card-map__button",attrs:{text:"Зарегистрироваться"},on:{click:function(t){return e.wrapperToEmailFrom()}}}):t("BaseButton",{staticClass:"button button__primary card-map__button",attrs:{text:"Продолжить выбор мест"},on:{click:function(t){return e.setNextPerson()}}}),t("button",{staticClass:"card-map__cancel",on:{click:function(t){return e.$emit("close")}}},[e._v(" Отменить ")])],1)],1),e.currentSeatsMap?t("div",{staticClass:"card-map__right-side"},[t("MapSeats",{attrs:{"map-seats":e.currentSeatsMap,person:e.currentPerson},on:{update:function(t){return e.setSeatCurrentPerson(t)},forceUpdate:function(t){return e.setSeatCurrentPersonDOM(t)}}})],1):e._e(),t("div",{staticClass:"card-map__group-button mobile-buttons"},[e.store.checkSeats?t("BaseButton",{staticClass:"button button__primary card-map__button",attrs:{text:"Зарегистрироваться"},on:{click:function(t){return e.wrapperToEmailFrom()}}}):t("BaseButton",{staticClass:"button button__primary card-map__button",attrs:{text:"Продолжить выбор мест"},on:{click:function(t){return e.setNextPerson()}}}),t("button",{staticClass:"card-map__cancel",on:{click:function(t){return e.$emit("close")}}},[e._v("Отменить")])],1),t(Ce.Z,{attrs:{timeout:3e3},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(B.Z,e._b({attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",s,!1),[e._v(" Закрыть ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+" ")])],1)},ye=[],Pe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card-map__map-container"},[t("table",{staticClass:"card-map__map"},[t("tr",{staticClass:"card-map__horizontal-list"},e._l(e.uniqueHeaderLetters,(function(s,a){return t("td",{key:a,staticClass:"card-map__map-seat",class:""===s?"empty":""},[t("span",{staticClass:"card-map__map-column"},[e._v(e._s(s))])])})),0),e._l(e.mapSeatsModified,(function(s,a){return t("tr",{key:a,staticClass:"card-map__horizontal-row"},[t("td",{staticClass:"card-map__row-number"},[t("span",{staticClass:"card-map__map-row"},[e._v(e._s(s.row_number))])]),e._l(s.seats,(function(s,n){return t("td",{key:n,staticClass:"card-map__map-seat",class:e.calculateStatusSeat(s),attrs:{"data-index":`${a}:${n}`}},["empty"!==e.calculateStatusSeat(s)?t("button",{staticClass:"card-map__map-button",style:s?.priceColor?`background-color:${s.priceColor}`:"",on:{click:function(t){return e.doChoosePlace(s,`${a}:${n}`,e.person)}}}):e._e()])}))],2)})),t("tr",{staticClass:"card-map__price-container"},[t("td",[t("aside",[e._m(0),t("ul",{staticClass:"card-map__price-list card-map__price-list--custom"},e._l(e.uniquePrice,(function(s,a){return t("li",{key:a,staticClass:"card-map__price-item",style:`color:${s.color}`,attrs:{"data-color":s.color}},[t("span",{staticClass:"card-map__price-description"},[e._v(e._s(s.price)+" ₽")])])})),0)])])])],2)])},Se=[function(){var e=this,t=e._self._c;return t("ul",{staticClass:"card-map__price-list"},[t("li",{staticClass:"card-map__price-item chosen"},[t("span",[e._v("Выбрано")])]),t("li",{staticClass:"card-map__price-item occupied"},[t("span",[e._v("Занято")])])])}];function Ne(e){const t=(0,a.iH)([]),s=(0,a.iH)([]),n=(0,a.iH)(null),r=(0,a.iH)(null),i=S();function o(e){let t=0;const s=e.rows,a=[];return s.forEach((e=>{const s=e.seats;s.forEach((e=>{const s=e.rate;!a.find((e=>e.price===s))&&s&&(a.push({price:s,color:ie[t]}),t++)}))})),a.sort(((e,t)=>e.price-t.price)),a}function l(e){let t="";return e.available&&e.exists?t+="free":!e.available&&e.exists?t+="occupied":t+="empty",t}function c(t,s,a){if(t.available){n.value=t;const r=i.findIndexPersonByTicket(a.ticketNumber);e("update",{indexCurrentPerson:r,indexElement:s,rate:n.value.rate,seat:t.seatNumber})}}function u(e){const t=e,a=t.xCount,n=[];function r(e){e.length<a&&(e.push({available:!1,exists:!1,rate:"",seatNumber:""}),r(e))}return t.rows.forEach((e=>{const t=[];e.seats.forEach((e=>{e.rate&&(e.priceColor=s.value.find((t=>t.price===e.rate)).color),t.push(e)})),r(t),n.push({seats:t,row_number:e.row_number})})),n}return{uniqueHeaderLetters:t,uniquePrice:s,chosenSeat:n,mapSeatsModified:r,storeUsers:i,getUniquePrice:o,calculateStatusSeat:l,doChoosePlace:c,modifyMapSeats:u}}var xe={name:"MapSeats",props:{mapSeats:{type:Object,requared:!0},person:{type:Object,requared:!0}},setup(e,{emit:t}){const{uniqueHeaderLetters:s,uniquePrice:n,chosenSeat:r,mapSeatsModified:i,storeUsers:o,getUniquePrice:l,calculateStatusSeat:c,doChoosePlace:u,modifyMapSeats:d}=Ne(t);return(0,a.bv)((()=>{if(s.value=e.mapSeats.names,n.value=l(e.mapSeats),i.value=d(e.mapSeats),console.log(e.person.normalSeat),e.person.normalSeat){const a=e.person.normalSeat,n=o.findIndexPersonByTicket(e.person.ticketNumber),r=parseInt(a)-1,i=s.value.findIndex((e=>e===a.slice(-1))),l=`${r}:${i}`;-1!==r&&i&&t("forceUpdate",{indexCurrentPerson:n,indexElement:l})}})),{uniqueHeaderLetters:s,uniquePrice:n,chosenSeat:r,mapSeatsModified:i,storeUsers:o,getUniquePrice:l,calculateStatusSeat:c,doChoosePlace:u,modifyMapSeats:d}}},Ie=xe,Ee=(0,$.Z)(Ie,Pe,Se,!1,null,null,null),we=Ee.exports;function Te(){const e=(0,P.dx)(),t=(0,a.iH)(null),s=(0,a.iH)(null),n=(0,a.iH)([]),r=(0,a.iH)(!1),i=(0,a.iH)(null),o=S(),l=pe(),c=(0,a.iH)(!1),u=(0,a.qj)({status:!1,indexPerson:null});function d(e){o.persons.forEach(((t,s)=>{s===e?o.updatePerson(s,{active:!0}):o.updatePerson(s,{active:!1})}))}function p(e){return e?.normalSeat&&!e?.seatRate?`Место ${e.normalSeat} за ${E(o.findRateBySeat(e.mapSeats,e.normalSeat))} ₽`:e?.normalSeat?`Место ${e.normalSeat} за ${E(e.seatRate)} ₽`:"Место не выбрано"}async function m({indexCurrentPerson:e,indexElement:t}){await(0,a.Y3)();const s=document.querySelector(`.card-map__map-seat[data-index="${t}"]`).querySelector(".card-map__map-button"),r=o.persons[e].lastName[0],i=n.value.find((t=>t?.personIndex===e)),c=i?.activeClass||"selected-active-"+(0,de.x0)(5);s.setAttribute("data-letter",r);const u=s.classList.toggle(c);u||(o.updatePerson(e,{normalSeat:null,seatRate:null}),l.patchCard(l.getCardIdByIndexPerson(e),{normalSeat:null}));const d={personIndex:e,activeLi:s,lastActiveLi:i?.activeLi,activeClass:c,activeIndex:t,lastActiveIndex:i?.activeIndex},p=n.value.findIndex((t=>t?.personIndex===e));-1!==p&&n.value.splice(p,1),n.value.push(d)}async function h({indexCurrentPerson:t,indexElement:s,rate:a,seat:n}){const p=o.persons.find(((e,s)=>e.normalSeat===n&&s!==t));if(p)i.value="Это место уже выбрано!",r.value=!0;else{c.value=!0,u.status=!0,u.indexPerson=t;const r=await o.checkAvailableSeat(o.persons[t].ticketNumber,n).then((()=>{c.value=!1,u.indexPerson===t&&(u.status=!1)}));console.log(r),e.trackEvent({event:"select_seat",category:"category",action:"click",label:"My custom component trigger",value:5e3,noninteraction:!1}),o.updatePerson(t,{normalSeat:n,seatRate:a}),l.patchCard(l.getCardIdByIndexPerson(t),{normalSeat:n}),d(t),m({indexCurrentPerson:t,indexElement:s})}}function f(){const e=o.persons.findIndex((e=>!e.normalSeat&&e.possibleActions.includes("CHANGE_SEAT")));-1!==e&&(s.value=e,t.value=o.persons[s.value],d(s.value))}return{currentPerson:t,currentIndexPerson:s,activeButtonElements:n,snackbar:r,snackbarText:i,loadingSelect:c,loadingLi:u,store:o,setNextPerson:f,setSeatCurrentPerson:h,updateActivePerson:d,doPersonStatus:p,setSeatCurrentPersonDOM:m}}function De(e,t,s){const n=(0,a.iH)(null);function r(e){n.value.forEach((e=>e.classList.remove("card-map__item--selected"))),document.querySelector(`.card-map__item[data-index="${e}"]`).classList.add("card-map__item--selected")}function i(a){r(a),t(a),e.value=s.persons[a]}function o(e){let t="";return e.possibleActions.includes("CHANGE_SEAT")?(e.active&&(t+="card-map__item--selected "),s.persons.find((t=>{if(t?.normalSeat&&t.ticketNumber===e.ticketNumber)return t}))&&(t+="card-map__item--success "),t):"card-map__item-button--disabled card-map__item--success"}function l(){const e=document.getElementById("mail");T(e)}return{items:n,setPerson:i,setClass:o,toEmailForm:l}}var Be={name:"CardMap",components:{MapSeats:we,BaseButton:ue},props:{open:{type:Boolean}},setup(e,{emit:t}){const s=(0,P.dx)(),n=(0,a.iH)(null),{currentPerson:r,currentIndexPerson:i,activeButtonElements:o,snackbar:l,snackbarText:c,store:u,setNextPerson:d,setSeatCurrentPerson:p,setSeatCurrentPersonDOM:m,updateActivePerson:h,loadingSelect:f,loadingLi:_,doPersonStatus:g}=Te(),{items:v,setPerson:b,setClass:C,toEmailForm:k}=De(r,h,u);function y(){t("close"),s.trackEvent({event:"gopay_map",category:"category",action:"click",label:"My custom component trigger",value:5e3,noninteraction:!1}),k()}return(0,a.YP)(r,(e=>{n.value=e.mapSeats})),(0,a.YP)((()=>e.open),(e=>{e&&d()})),(0,a.YP)((()=>u.persons),(()=>{r.value=u.activePerson}),{immediate:!0,deep:!0}),(0,a.YP)(o,(e=>{e.forEach((e=>{e?.lastActiveLi!==e.activeLi&&e?.lastActiveLi&&e.lastActiveLi.classList.remove(e.activeClass)}))}),{deep:!0}),{numberFormat:E,currentPerson:r,currentIndexPerson:i,activeButtonElements:o,snackbar:l,snackbarText:c,store:u,currentSeatsMap:n,setNextPerson:d,setSeatCurrentPerson:p,setSeatCurrentPersonDOM:m,updateActivePerson:h,loadingSelect:f,loadingLi:_,setClass:C,setPerson:b,items:v,wrapperToEmailFrom:y,BLUE:re,doPersonStatus:g}}},Me=Be,Oe=(0,$.Z)(Me,ke,ye,!1,null,null,null),Fe=Oe.exports;function Ae(){const e=(0,P.dx)(),t=(0,a.iH)(!1),s=S(),n=(0,a.iH)(!0);async function r(){const t=w();e.trackEvent({event:"gopay",category:"category",action:"click",label:"My custom component trigger",value:5e3,noninteraction:!1});const a=(await s.register(t.trim())).data;a.text?window.location.href=a.text:console.log("сейчас должен был произойти редирект, но его нет :(")}return{sheet:t,doRegister:r,disabledButton:n}}var He={name:"PassengerList",components:{BaseButton:ue,CardPassenger:ge,CardMap:Fe},setup(e,{emit:t}){const s=S(),n=pe(),r=(0,a.iH)(null),{sheet:i,doRegister:o,disabledButton:l}=Ae();function c(e){t("updateFlightInfo",e)}return(0,a.bv)((()=>{s.basePersonIsDefined?s.persons.forEach((e=>{n.createCard({lastName:e.lastName,ticketNumber:e.ticketNumber,mapSeats:e.mapSeats},{possibleActions:e.possibleActions,normalSeat:e.normalSeat,status:e.status,isConfirmed:!!e.mapSeats,personIsDefined:!0,checked:"CHECKED"===e.checked})})):s.basePersonIsDefined||n.createCard({lastName:s.basePerson.last_name,ticketNumber:s.basePerson.ticket_number},{personIsDefined:!1})})),(0,a.YP)((()=>s.statusFlight),(e=>{r.value=e}),{immediate:!0}),(0,a.YP)((()=>s.persons),(()=>{s.totalForms&&s.totalPrice?l.value=!1:l.value=!0}),{immediate:!0,deep:!0}),{sheet:i,storeUsers:s,storeCards:n,statusFlight:r,updateFlightInfo:c,doRegister:o,disabledButton:l}}},$e=He,Ze=(0,$.Z)($e,z,X,!1,null,"231263b0",null),Le=Ze.exports,Re={components:{PassengerList:Le},props:{preloader:{type:Boolean,default:!0}},data(){return{}},methods:{updateFlightInfo(e){this.$emit("updateFlightInfo",e)}}},Ue=Re,qe=(0,$.Z)(Ue,V,Y,!1,null,null,null),Ge=qe.exports,je=function(){var e=this,t=e._self._c;return t("Teleport",{attrs:{to:"#teleport-target"}},[t("div",{staticClass:"popup"},[e.show?t(J.Z,{attrs:{prominent:"",type:e.notification.type}},[e._v(" "+e._s(e.notification.textMessage)+" "),e.notification.availableReload?t(B.Z,{on:{click:function(t){return e.$emit("reload")}}},[e._v("Повторить запрос")]):e._e()],1):e._e()],1)])},Ke=[],Ve=s(7836),Ye={name:"BaseNotification",components:{Teleport:Ve.Z},data(){return{show:!1}},computed:{...(0,m.rn)(S,["notification"])},watch:{notification(e){e.type&&e.textMessage?this.show=!0:this.show=!1}}},We=Ye,Qe=(0,$.Z)(We,je,Ke,!1,null,null,null),ze=Qe.exports,Xe={name:"App",components:{MainHeader:L,MainFooter:K,MainPage:Ge,BaseButton:ue,BaseNotification:ze},data(){return{radioGroup:0,flightInfo:null,store:S(),storeCards:pe(),toOpenListCards:null}},computed:{...(0,m.Ah)(S,["fetchStatus","basePerson","segments","airline","persons","dialog","basePersonIsDefined","flightKey"]),...(0,m.Ah)(pe,["cards"]),headerInfo(){return{departureDateTime:this.flightInfo?.departureDateTime,arrivalDateTime:this.flightInfo?.arrivalDateTime,flightCode:this.flightInfo?.airlineCode+this.flightInfo?.flightNumber,arrivalCity:this.flightInfo?.arrivalCity,arrivalCityCode:this.flightInfo?.arrivalCityCode,departureCity:this.flightInfo?.departureCity,departureCityCode:this.flightInfo?.departureCityCode,webCheckInClose:this.flightInfo?.stages?.webCheckInClose,webCheckInOpen:this.flightInfo?.stages?.webCheckInOpen,status:this.flightInfo?.status}}},methods:{convertTime:N,comparisonTime:x,changeFlight(){this.dialog=!0},...(0,m.nv)(S,["getPerson","getAirline","getInfoFlight","checkValidPassenger"]),updateFlightInfo(e){this.flightInfo=e,this.fetchStatus.success=!0,this.fetchStatus.loading=!1,this.store.notification={type:null,availableReload:null,textMessage:null}},async setTicket(){this.dialog=!1,this.toOpenListCards=!1,this.storeCards.$reset(),this.fetchStatus.loading=!0,this.flightKey=null;const e=(await this.getInfoFlight({ticketNumber:this.basePerson.ticket_number,lastName:this.basePerson.last_name},this.radioGroup)).flightInfo;this.updateFlightInfo(e),this.basePersonIsDefined=!0},async fetch(e,t){const s=await this.checkValidPassenger({lastName:e,ticketNumber:t});String(s?.code).startsWith("5")?(this.store.notification={type:"error",availableReload:!1,textMessage:s.data.error},this.fetchStatus.success=!1):String(s?.code).startsWith("4")?(this.store.basePersonIsDefined=!1,this.toOpenListCards=!0,this.store.notification={type:"error",availableReload:!1,textMessage:s.data.error},this.fetchStatus.success=!1):"SELECT_SEGMENTS_GROUP"===s.result?(this.store.parseSegments(s),this.dialog=!0):"CAPTCHA_REQUIRED"===s.result?(this.store.basePersonIsDefined=!1,this.toOpenListCards=!0,this.store.notification={type:"error",availableReload:!1,textMessage:"CAPTCHA_REQUIRED"},this.fetchStatus.success=!1):"OK"===s.result&&(this.store.basePersonIsDefined=!0,this.flightInfo=(await this.getInfoFlight({ticketNumber:t,lastName:e})).flightInfo,this.fetchStatus.success=!0,this.fetchStatus.loading=!1)}},async created(){const e=this.$route.query.id,t=await this.getPerson(e);if(!t)return;const s=await this.getAirline();s&&await this.fetch(this.basePerson?.last_name,this.basePerson?.ticket_number)}},Je=Xe,et=(0,$.Z)(Je,d,p,!1,null,null,null),tt=et.exports,st=s(1283);a.ZP.use(st.Z,{iconfont:"mdi"});var at=new st.Z({}),nt=s(8345);a.ZP.use(nt.ZP);const rt=[{path:"/:id",name:"home",component:Ge}],it=new nt.ZP({mode:"history",routes:rt});var ot=it;a.ZP.use(m.og),a.ZP.use(P.ZP,{id:"GTM-5C3TND",defer:!1}),a.ZP.config.productionTip=!1;const lt=(0,m.WB)();new a.ZP({vuetify:at,router:ot,pinia:lt,render:e=>e(tt)}).$mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,r){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],r=e[u][2];for(var o=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(o=!1,r<i&&(i=r));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,n,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,r,i=a[0],o=a[1],l=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var u=l(s)}for(t&&t(a);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},a=self["webpackChunkcheckin"]=self["webpackChunkcheckin"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(4326)}));a=s.O(a)})();
//# sourceMappingURL=app.78c9fc67.js.map